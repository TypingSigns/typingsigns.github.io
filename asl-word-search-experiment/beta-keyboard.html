<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Beta ASL Keyboard</title>

	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="viewport" content="width=device-width">
	<!-- <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=no"> -->

	<script src="js/jquery.min.js"></script>

	<link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
</head>

<!-- 
NOTES:
2017-12-27
- After much research, it turns out that there is no way to detect the height of a keyboard on iOS-Safari. 
	- Sources:
		- https://developer.apple.com/library/content/releasenotes/General/WhatsNewInSafari/Articles/Safari_10_0.html
		- https://stackoverflow.com/questions/39417778/iphone-safari-not-resizing-viewport-on-keyboard-open
		- https://medium.com/samsung-internet-dev/toolbars-keyboards-and-the-viewports-10abcc6c3769
		- (Also tried this to no avail: https://questionfocus.com/ipad-web-app-detect-virtual-keyboard-using-javascript-in-safari.html )
- The best alternative, for now, will be to do it manually.
 -->

<style>
	html, body {
		margin: 0;
		padding: 0;
		height: 100%;
		width: 100%;
		background: gray;

		font-family: 'Ubuntu', sans-serif;
	}
	.page-container {
		background: orange;
		height: 100%;
		transition: height 500ms;
	}
	body.ios-keyboard-visible .page-container {
		/* Note: This is Brute Force guestimate on iOS soft Keyboard Size*/
		height: 56%;
	}
	.header {
		background-color: cyan;
		height: 5%;
	}
	#typing-area {
		background-color: #fff;

		overflow-y: scroll;
  		-webkit-overflow-scrolling: touch; /* Allow for smooth scrolling */
		height: 75%;

		line-height: 1.5em;

		padding: 0 25px;
	}
	.suggestion-bar {
		background: cyan;
		overflow: hidden;
		height: 20%;
	}
</style>

<body>
	<div class="page-container">

		<div class="header">Header</div>
		
		<div id="typing-area" contentEditable="true">
			<div>This is the typing area</div>
			Hi <img src="http://t2.gstatic.com/images?q=tbn:ANd9GcQCze-mfukcuvzKk7Ilj2zQ0CS6PbOkq7ZhRInnNd1Yz3TQzU4e&t=1" /> An Image.
			<div>The html is imperfect and inconsistent, that's ok. It works fine enough for copying pasting into others (Pages,Notes,GoogleDocs).</div>
			<img src="http://t2.gstatic.com/images?q=tbn:ANd9GcQCze-mfukcuvzKk7Ilj2zQ0CS6PbOkq7ZhRInnNd1Yz3TQzU4e&t=1" />
			<div>Yup!ðŸ‘‹ Hi ðŸ¤”</div>
			<div>Lorem ipsum dolor sit amet, dui rhoncus metus aliquam molestie. Rhoncus rhoncus, eu ipsum. Vitae magna porttitor mauris vel tempus. Penatibus aenean fusce aenean justo, integer quam nullam. Nunc aliquam penatibus ullamcorper et posuere condimentum. Morbi magna lorem neque, metus diam massa, nunc faucibus sed duis ornare, vitae ultrices mauris elementum metus.</div>

			<div>Possimus malesuada, ullamcorper turpis blandit fusce consectetuer risus est, vivamus mauris sit aliquam rutrum. In amet vivamus, integer tortor in in sagittis aliquam at, lacus bibendum magna curabitur urna aenean id, urna ullam mattis, inceptos dui elit sed penatibus est. Sit in morbi metus. Eros elit lorem magna eu mauris, ac wisi aliquam ut facilisi aenean ut, ligula aenean nullam est. Quam et. Neque lobortis, mauris volutpat eleifend, ad elit class, interdum urna. Tristique enim natoque, maecenas sapien volutpat dolor cras, risus faucibus tristique malesuada sit. Leo consectetuer volutpat vehicula pede nisl imperdiet, tellus malesuada ligula luctus cum, eros aliquam vehicula, dolor nulla ipsum ultricies suscipit, aliquam neque ipsum neque. Leo placerat vitae dolor felis turpis, etiam eu mollit semper, scelerisque id dictum. Volutpat cras consectetuer interdum rutrum fusce, vivamus commodo aliquam interdum risus enim lectus, duis vitae in et elit culpa sed.
			</div>

			<div>Diam quisque vel curae magna, maecenas magna nibh montes suspendisse. Elit hendrerit sit malesuada dolor, risus volutpat accumsan. Est nam et lorem wisi nisl sed, nec sagittis id gravida suspendisse convallis, adipisci purus. Sit tempus sit, imperdiet non lacus voluptates sodales maecenas, ante vel phasellus. Eu ut, orci augue gravida dui ac viverra commodo. Metus suspendisse, montes aliquam a nam ac sit. Vulputate ut purus egestas etiam donec, non rutrum leo ornare condimentum nibh, metus et vitae. Quis quis in vel magna vitae nam, magna cras blandit, amet a maecenas sed elit, ut platea tempus nunc id vestibulum sed, libero amet nec posuere. Nec massa fermentum nibh, pulvinar scelerisque varius. Mattis orci ullamcorper est sem cursus consectetuer, congue fermentum nibh mauris diam ultrices nonummy. Eros nec imperdiet non lectus, in est justo.
			</div>
			
			<div>
			At vel tempus sagittis, maecenas purus. A vel laboriosam nunc, interdum ac eget penatibus proin, congue et in bibendum euismod. Lacinia eget. Molestie et elit nullam massa consectetur in, cubilia feugiat pellentesque ipsum nisl, urna vitae vulputate, mattis nibh suspendisse. Pede mauris fringilla elit, non ipsum, dapibus orci duis enim est cursus, convallis posuere.
			</div>

		</div>

		<div class="suggestion-bar">
			Suggestion Bar
		</div>

	</div>
</body>

<script>

	var iOS = true; //!!navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform);

	function iOSKeyboardToggled(toggledOn) {
		if (toggledOn) {
			$('body').addClass('ios-keyboard-visible');
		} else {
			$('body').removeClass('ios-keyboard-visible');
		}
	}

	$("#typing-area").focus(function() {
		if (iOS) { iOSKeyboardToggled(true); }

		setTimeout(function() { window.scrollTo(0, 0); }, 200);
		setTimeout(function() { window.scrollTo(0, 0); }, 500);
	});

	$("#typing-area").blur(function() {
		if (iOS) { iOSKeyboardToggled(false); }
	});
	
</script>

</html>